/* Overlay container on top-left over the game canvas */
#chatRoot{
  position:fixed; top:12px; left:12px; z-index:8;
  width:280px; max-height:min(72vh,640px);
  display:grid; grid-template-rows:auto auto 1fr auto;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:12px; overflow:hidden;
  box-shadow:0 14px 38px rgba(0,0,0,0.35);
  backdrop-filter:blur(10px) saturate(115%);
  -webkit-backdrop-filter:blur(10px) saturate(115%);
  color:#e5e7eb; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;
}

/* Header (avatar + title) */
.card-header{display:flex;align-items:center;gap:12px;padding:12px 14px;
  border-bottom:1px solid rgba(255,255,255,0.10);
  background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02));
}
.img-avatar{width:40px;height:40px;border-radius:50%;background:#333;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.2);}
.text-chat{margin:0;color:#fff;font-weight:700;letter-spacing:.2px}

/* Question banner (top) */
.question-banner{padding:12px 14px 10px;border-bottom:1px dashed rgba(255,255,255,0.14);
  background:rgba(255,255,255,0.04)}
#questionCategory{display:inline-block;font-size:12px;letter-spacing:.25px;opacity:.85;color:#cfe3ff;margin-bottom:6px}
#questionText{margin:0;font-size:16px;line-height:1.25;color:#fff9df}
#questionSubtext{margin:6px 0 0;font-size:12px;color:#e9e3c5;opacity:.9}

/* Messages area */
.card-body{overflow-y:auto;background:rgba(0,0,0,0.10)}
.messages-container{padding:12px}

/* Bubbles */
.message-box{max-width:88%;padding:10px 12px;margin:6px 0;border-radius:12px;font-size:13px;line-height:1.35}
.message-box.left{background:#f1f1f1;color:#111;border:1px solid rgba(0,0,0,0.05)}
.message-box.right{margin-left:auto;background:#333;color:#fff;border:1px solid rgba(255,255,255,0.12)}

/* Footer input */
.card-footer{border-top:1px solid rgba(255,255,255,0.10);padding:10px;background:rgba(255,255,255,0.05)}
.input-row{display:grid;grid-template-columns:1fr auto;gap:8px}
#answerInput{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.18);
  background:rgba(255,255,255,0.06);color:#e5e7eb;resize:vertical;min-height:42px;max-height:120px}
#answerInput::placeholder{color:rgba(255,255,255,0.55)}
.button-send{padding:0 14px;height:42px;border:none;border-radius:10px;cursor:pointer;background:#333;color:#fff;font-weight:700;letter-spacing:.3px}
.button-send:hover{background:#f1f1f1;color:#333}

/* Action row buttons (TTS/Replay/Back/Continue) */
.action-row{display:flex;align-items:center;gap:8px;padding:8px 10px 0}
#ttsToggle,#replayAudio,#backButton,#submitButton{
  height:30px;padding:0 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.18);
  background:rgba(255,255,255,0.06);color:#e5e7eb;cursor:pointer;font-size:12px}
#submitButton{margin-left:auto;background:#333;color:#fff;border:none}
#submitButton:hover{background:#f1f1f1;color:#333}

/* Loading and error */
#loadingContainer{padding:12px 14px;display:none}
#loadingText{margin:0;color:#e5e7eb;font-size:14px}
#errorMessage{display:none;padding:10px 12px;color:#fff;background:rgba(200,0,0,0.45)}

/* Small screens */
@media (max-width:720px){
  #chatRoot{width:min(92vw,360px);top:10px;left:10px}
}
